import{_ as g,a as S}from"./BdjKlhi4.js";import{_ as f,c as i,o as r,a as s,j as h,d as w,b as d,t as m,n as _,k as b,v as $,F as C,r as k,g as x,l as Q,w as v}from"./WgwrmVCH.js";import{_ as D}from"./CGcpONMy.js";import{u as B}from"./C28jdvqy.js";import{u as K}from"./CrsY6hiW.js";const E={props:{options:{type:Array,required:!0},placeholder:{type:String,default:"Popularity Descending"},modelValue:{type:String,required:!0},searchable:{type:Boolean,default:!1}},emits:["update:modelValue"],data(){return{isOpen:!1,selectedOption:"",searchQuery:""}},methods:{toggleDropdown(){this.isOpen=!this.isOpen},selectOption(e){this.selectedOption=e.label,this.$emit("update:modelValue",e.value),this.isOpen=!1}}},F={key:0,class:"dropdown"},N=["onClick"];function P(e,t,o,u,a,c){const p=g;return r(),i("div",{class:_(["custom-select",{"is-open":a.isOpen}])},[s("div",{class:"selected-option _input",onClick:t[0]||(t[0]=(...n)=>c.toggleDropdown&&c.toggleDropdown(...n))},[w(m(a.selectedOption||o.placeholder)+" ",1),d(p,{class:_(["arrow-icon",a.isOpen?"arrow-icon-rotated":""]),height:"16px",width:"16px",url:"../icons/select-arrow.svg"},null,8,["class"])]),a.isOpen?(r(),i("div",F,[o.searchable?b((r(),i("input",{key:0,"onUpdate:modelValue":t[1]||(t[1]=n=>a.searchQuery=n),type:"text",placeholder:"Search...",class:"search-input"},null,512)),[[$,a.searchQuery]]):h("",!0),(r(!0),i(C,null,k(o.options,n=>(r(),i("div",{class:"dropdown-item",onClick:y=>c.selectOption(n)},m(n.label),9,N))),256))])):h("",!0)],2)}const O=f(E,[["render",P],["__scopeId","data-v-c613fee5"]]),A=x({name:"Select",components:{Icon:g},data(){return{isExpanded:this.isOpened}},props:{title:{type:String,required:!0},isOpened:{type:Boolean,required:!1,default:!1}},methods:{toggleState(){this.isExpanded=!this.isExpanded}}}),I={class:"_title-3"},q={key:0,class:"drop-content"};function M(e,t,o,u,a,c){const p=g;return r(),i("div",null,[s("div",{onClick:t[0]||(t[0]=(...n)=>e.toggleState&&e.toggleState(...n)),class:"drop-title"},[s("h2",I,m(e.title),1),d(p,{class:_(["arrow-icon",e.isExpanded?"arrow-icon-rotated":""]),url:"../icons/dropdown-arrow.svg",width:"16px",height:"16px"},null,8,["class"])]),e.isExpanded?(r(),i("div",q,[Q(e.$slots,"default",{},void 0,!0)])):h("",!0)])}const G=f(A,[["render",M],["__scopeId","data-v-33f9a445"]]),R=x({name:"index",components:{Button:S,GenericCardList:D,DropDown:G,Select:O},data(){return{moviesStore:B(),peopleStore:K(),selectedSort:"popularity.desc",selectedGenres:[],selectedKeyword:"",genres:[],sorts:[{label:"Title Ascending",value:"title.asc"},{label:"Title Descending",value:"title.desc"},{label:"Popularity Ascending",value:"popularity.asc"},{label:"Popularity Descending",value:"popularity.desc"},{label:"Revenue Ascending",value:"revenue.asc"},{label:"Revenue Descending",value:"revenue.desc"},{label:"Rating Ascending",value:"vote_average.asc"},{label:"Rating Descending",value:"vote_average.desc"}]}},methods:{toggleGenre(e){const t=this.genres.find(o=>o.id===e);if(t)if(this.selectedGenres.find(o=>o===e)){const o=this.selectedGenres.findIndex(u=>Number(u)===e);o>=0&&this.selectedGenres.splice(o,1)}else this.selectedGenres.push(t.id)},handleFilters(){this.moviesStore.genresQuery=this.selectedGenres.toString(),this.moviesStore.setKeywordsByQuery(this.selectedKeyword),this.moviesStore.sortQuery=this.selectedSort,this.moviesStore.fetchMovies()}},async mounted(){await this.moviesStore.fetchMovies(),await this.peopleStore.fetchPeople(),this.genres=await this.moviesStore.getGenres()},created(){this.moviesStore.sortQuery="popularity.desc",this.moviesStore.genresQuery="",this.moviesStore.genresQuery=""}}),T={class:"_wrapper"},L={class:"movies-container"},U={class:"movies-options"},z={class:"filters"},j={class:"genres"},H={class:"genre"},J=["for"],W=["onChange","id"],X={class:"movies-content"};function Y(e,t,o,u,a,c){const p=O,n=G,y=S,V=D;return r(),i("div",T,[s("div",L,[s("div",U,[d(n,{"is-opened":!0,title:"Sort"},{default:v(()=>[d(p,{options:e.sorts,modelValue:e.selectedSort,"onUpdate:modelValue":t[0]||(t[0]=l=>e.selectedSort=l)},null,8,["options","modelValue"])]),_:1}),d(n,{"is-opened":!0,title:"Filters"},{default:v(()=>[s("div",z,[t[3]||(t[3]=s("div",null,"Keywords",-1)),b(s("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>e.selectedKeyword=l),onChange:t[2]||(t[2]=l=>e.moviesStore.setKeywordsByQuery(e.selectedKeyword)),class:"_input",type:"text",placeholder:"Filter by keywords..."},null,544),[[$,e.selectedKeyword]]),t[4]||(t[4]=s("div",{class:"horizontal-separator"},null,-1)),t[5]||(t[5]=s("div",null,"Genres",-1)),s("div",j,[(r(!0),i(C,null,k(e.genres,l=>(r(),i("div",H,[s("label",{class:"genre-label",for:l.name},m(l.name),9,J),s("input",{onChange:Z=>e.toggleGenre(l.id),class:"genre-input",type:"checkbox",id:l.name},null,40,W)]))),256))])])]),_:1}),d(y,{onClick:e.handleFilters,width:"100%"},{default:v(()=>t[6]||(t[6]=[w("Search")])),_:1},8,["onClick"])]),s("div",X,[d(V,{movies:e.moviesStore.movies,"next-page-handler":e.moviesStore.fetchNextPage},null,8,["movies","next-page-handler"])])])])}const ie=f(R,[["render",Y],["__scopeId","data-v-3f251c6e"]]);export{ie as default};
